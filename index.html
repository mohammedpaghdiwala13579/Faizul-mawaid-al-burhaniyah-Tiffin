<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tiffin Service – Weekly Menu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
/* ──────────────────────────────────────
   KEEP YOUR ORIGINAL CSS (unchanged)
   ────────────────────────────────────── */
* {margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Inter',sans-serif;background:url('https://i.postimg.cc/zBwzbgYh/panchgani.jpg') center/cover fixed;
    min-height:100vh;display:flex;justify-content:center;align-items:center;position:relative;}
body::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(139,69,19,.6),rgba(160,82,45,.7));z-index:-1;}
.container{max-width:1000px;width:100%;background:rgba(255,248,220,.95);border-radius:20px;
    box-shadow:0 20px 40px rgba(0,0,0,.25);overflow:hidden;display:flex;flex-direction:column;height:95vh;
    backdrop-filter:blur(15px);border:2px solid rgba(218,165,32,.6);}
header{background:linear-gradient(135deg,#DEB887,#F5DEB3,#DAA520);color:#8B4513;padding:15px;text-align:center;}
.logo{font-size:20px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:10px;
    font-family:'Playfair Display',serif;}
.logo i{font-size:24px;color:#DAA520;animation:iconFloat 3s ease-in-out infinite;}
@keyframes iconFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}
.name-input-container{padding:12px;display:flex;justify-content:center;align-items:center;gap:10px;
    background:rgba(255,248,220,.85);border-radius:12px;margin-top:12px;backdrop-filter:blur(5px);
    border:1px solid rgba(218,165,32,.5);}
#customer-name{padding:8px 14px;border:1px solid #DEB887;border-radius:8px;font-size:15px;min-width:160px;
    background:rgba(255,248,220,.95);transition:.3s;}
#customer-name:focus{outline:none;border-color:#DAA520;box-shadow:0 0 0 3px rgba(218,165,32,.25);}
.view-db-btn{padding:10px 18px;background:linear-gradient(135deg,#F5DEB3,#DEB887);color:#8B4513;
    border:none;border-radius:8px;cursor:pointer;font-weight:600;display:inline-flex;align-items:center;gap:8px;
    box-shadow:0 4px 15px rgba(218,165,32,.3);border:1px solid rgba(218,165,32,.3);}
.view-db-btn:hover{background:linear-gradient(135deg,#DEB887,#B8860B);transform:translateY(-2px) scale(1.02);}
.days-tabs{display:flex;background:linear-gradient(135deg,#FFF8DC,#E6E6FA);overflow-x:auto;}
.day-tab{flex:1;min-width:70px;padding:12px 8px;text-align:center;color:#8B4513;cursor:pointer;
    transition:.4s;border:none;background:transparent;font-weight:600;font-size:13px;position:relative;}
.day-tab::before{content:'';position:absolute;bottom:0;left:0;right:0;height:3px;
    background:linear-gradient(90deg,#DAA520,#FFD700,#B8860B);transform:scaleX(0);transition:.4s;}
.day-tab:hover{color:#654321;background:rgba(245,222,179,.2);}
.day-tab:hover::before{transform:scaleX(1);}
.day-tab.active{color:#8B4513;background:rgba(245,222,179,.5);}
.day-tab.active::before{transform:scaleX(1);}
.content-area{flex:1;overflow:hidden;display:flex;flex-direction:column;}
.day-content{padding:20px;overflow-y:auto;height:100%;display:none;}
.day-content.active{display:block;animation:fadeInUp .6s cubic-bezier(.25,.46,.45,.94);}
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.day-title{text-align:center;color:#8B4513;margin-bottom:20px;font-size:24px;font-weight:700;
    background:linear-gradient(135deg,#DAA520,#F5DEB3,#DEB887);-webkit-background-clip:text;
    -webkit-text-fill-color:transparent;background-clip:text;font-family:'Playfair Display',serif;}
.day-title::after{content:'';position:absolute;bottom:0;left:50%;transform:translateX(-50%);
    width:80px;height:3px;background:linear-gradient(90deg,#DAA520,#FFD700,#B8860B);border-radius:2px;}
.meal-section{margin-bottom:25px;background:rgba(255,248,220,.95);border-radius:20px;
    box-shadow:0 12px 35px rgba(0,0,0,.2);backdrop-filter:blur(10px);border:1px solid rgba(218,165,32,.4);}
.meal-header{background:linear-gradient(135deg,#F5DEB3,#DEB887);color:#8B4513;padding:15px 18px;
    display:flex;align-items:center;gap:10px;font-size:20px;font-weight:700;font-family:'Playfair Display',serif;}
.meal-header.lunch{background:linear-gradient(135deg,#FFF8DC,#F0E68C,#DAA520);}
.meal-header.dinner{background:linear-gradient(135deg,#F5F5DC,#DEB887,#CD853F);}
.dishes-container{padding:18px;display:grid;grid-template-columns:repeat(2,1fr);gap:18px;}
.dish-category{display:flex;flex-direction:column;}
.category-title{font-size:16px;font-weight:700;color:#8B4513;margin-bottom:12px;padding-bottom:8px;
    border-bottom:2px solid #DAA520;text-align:center;background:linear-gradient(135deg,#DAA520,#FFD700);
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
    font-family:'Playfair Display',serif;}
.dish-item{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:15px;
    background:rgba(255,248,220,.98);margin-bottom:12px;box-shadow:0 5px 20px rgba(0,0,0,.15);
    border:1px solid rgba(218,165,32,.4);height:60px;transition:.4s;}
.dish-item:hover{transform:translateY(-5px) scale(1.04);box-shadow:0 12px 35px rgba(0,0,0,.2);}
.dish-info{display:flex;align-items:center;gap:10px;flex:1;overflow:hidden;}
.dish-icon{width:28px;height:28px;background:linear-gradient(135deg,#DAA520,#F5DEB3,#FFD700);
    border-radius:50%;display:flex;align-items:center;justify-content:center;color:#8B4513;
    font-size:12px;box-shadow:0 3px 10px rgba(218,165,32,.6);animation:pulse 2s infinite;}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
.dish-name{font-size:15px;font-weight:600;color:#8B4513;white-space:nowrap;overflow:hidden;
    text-overflow:ellipsis;background:linear-gradient(135deg,#8B4513,#DAA520);
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.quantity-selector{display:flex;align-items:center;gap:8px;}
.qty-btn{width:24px;height:24px;border-radius:50%;border:none;background:linear-gradient(135deg,#F5DEB3,#DEB887,#FFD700);
    color:#8B4513;font-size:14px;font-weight:700;cursor:pointer;display:flex;align-items:center;
    justify-content:center;transition:.3s;box-shadow:0 3px 10px rgba(218,165,32,.5);}
.qty-btn:hover{background:linear-gradient(135deg,#DEB887,#B8860B,#DAA520);transform:scale(1.15) rotate(10deg);}
.qty-display{width:30px;text-align:center;font-size:14px;font-weight:700;color:#8B4513;
    background:linear-gradient(135deg,rgba(218,165,32,.4),rgba(255,215,0,.4));border-radius:6px;padding:3px;}
.order-summary{background:linear-gradient(135deg,rgba(255,248,220,.98),rgba(245,222,179,.98));
    padding:18px;border-radius:20px;margin-top:20px;border:1px solid rgba(218,165,32,.5);
    box-shadow:0 8px 25px rgba(218,165,32,.25);}
.summary-header{display:flex;justify-content:space-between;margin-bottom:15px;font-size:20px;
    font-weight:700;background:linear-gradient(135deg,#8B4513,#DAA520);
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
    font-family:'Playfair Display',serif;}
.summary-section-header{font-size:16px;font-weight:700;color:#DAA520;margin:10px 0 5px;
    padding-bottom:5px;border-bottom:1px solid rgba(218,165,32,.5);font-family:'Playfair Display',serif;}
.summary-item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid rgba(139,69,19,.25);
    font-size:14px;background:rgba(255,248,220,.8);margin-bottom:5px;border-radius:8px;padding:8px 12px;}
.submit-btn{width:100%;padding:16px;background:linear-gradient(135deg,#F5DEB3,#DEB887,#DAA520);
    color:#8B4513;border:none;border-radius:15px;font-size:18px;font-weight:700;cursor:pointer;
    margin-top:18px;display:flex;align-items:center;justify-content:center;gap:10px;
    box-shadow:0 10px 30px rgba(218,165,32,.35);border:1px solid rgba(218,165,32,.5);}
.submit-btn:hover{background:linear-gradient(135deg,#DEB887,#B8860B,#CD853F);
    transform:translateY(-4px) scale(1.02);}
.toast{position:fixed;bottom:20px;right:20px;background:#4CAF50;color:#fff;padding:16px 20px;
    border-radius:10px;display:none;z-index:1000;font-weight:600;box-shadow:0 8px 25px rgba(0,0,0,.2);}
.toast.show{display:block;animation:toastSlideIn .5s;}
@keyframes toastSlideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
@media(max-width:768px){
  .container{height:100vh;border-radius:12px;}
  .day-tab{min-width:60px;font-size:11px;padding:10px 6px;}
  .dishes-container{grid-template-columns:1fr;gap:10px;}
  .dish-item{height:50px;}
  .name-input-container{flex-direction:column;}
}
</style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo">
      <img src="https://i.postimg.cc/HLj8yRyp/panchgani-removebg-preview.png" height="100" alt="Logo 1">
      <img src="https://i.postimg.cc/CMttfwC3/fmb.png" height="100" alt="Logo 2">
    </div>
    <div class="name-input-container">
      <label for="customer-name">Name:</label>
      <input type="text" id="customer-name" placeholder="Enter your name" autocomplete="on">
    </div>
    <div class="header-actions">
      <button id="view-db-link" class="view-db-btn" data-href="https://docs.google.com/spreadsheets/d/1E_Um7247eCREoxiXttCCd76xRgFB6nMCf3bzzMrNch0/edit">
        <i class="fas fa-database"></i> View Orders Database
      </button>
    </div>
  </header>

  <div class="days-tabs" id="days-tabs"></div>
  <div class="content-area" id="content-area"></div>
</div>

<div id="toast" class="toast">Order Delivered</div>

<!---------------------  MENU DATA  --------------------->
<script>
/* -------------------------------------------------
   EDIT ONLY THIS OBJECT TO CHANGE THE WHOLE MENU
   ------------------------------------------------- */
const MENU = {
  monday: {
    lunch: [
      {icon:"utensils", name:"CHICKEN MAYONISE SANDWICH",      cat:"Main Dish (per unit)"},
      {icon:"leaf",     name:"MOONG DAL SALAD",    cat:"Salad (per bowl)"},
      {icon:"apple-alt",name:"ANY",              cat:"Fruits (per plate)"}
    ],
    dinner: [
      {icon:"cookie",   name:"PUDDING",            cat:"Sweet"},
      {icon:"pepper-hot",name:"GAWAR ALOO",          cat:"Starter (per bowl)"},
      {icon:"bread-slice",name:"Roti",          cat:"Roti (per unit)"},
      {icon:"bowl-rice",name:"CHAWAL",          cat:"Rice (per plate)"},
      {icon:"bowl-rice",name:"MASOOR DAL",      cat:"Gravy (per bowl)"}
    ]
  },
  tuesday: {
    lunch: [
      {icon:"utensils", name:"METHI GAAJAR PARATHA",   cat:"Main Dish (per unit)"},
      {icon:"leaf",     name:"TOMATO CHUTNEY",   cat:"Gravy (per bowl)"},
	  {icon:"leaf",     name:"SHREE KHAND",   cat:"Salad (per bowl)"},
      {icon:"apple-alt",name:"ANY",            cat:"Fruits (per plate)"}
    ],
    dinner: [
      {icon:"cookie",   name:"KHEER",    cat:"Sweet"},
      {icon:"pepper-hot",name:"MASALA BHINDI",   cat:"Starter (per bowl)"},
      {icon:"bread-slice",name:"Roti",         cat:"Roti (per unit)"},
      {icon:"bowl-rice",name:"CHAWAL",cat:"Rice (per plate)"},
      {icon:"bowl-rice",name:"KAADHI",    cat:"Soup (per bowl)"}
    ]
  },
  wednesday: {
    lunch: [
      {icon:"utensils", name:"CHICKEN PIZZA", cat:"Main Dish (per unit)"},
      {icon:"leaf",     name:"FRENCH FRIES",       cat:"Salad (per plate)"},
      {icon:"apple-alt",name:"ANY",                cat:"Fruits"}
    ],
    dinner: [
      {icon:"cookie",   name:"FALOODA",    cat:"Sweet"},
      {icon:"pepper-hot",name:"GILKI",           cat:"Starter (per bowl)"},
      {icon:"bread-slice",name:"Roti",            cat:"Roti (per unit)"},
      {icon:"bowl-rice",name:"JEERA RICE",            cat:"Rice (per plate)"},
      {icon:"bowl-rice",name:"TADKA DAL",         cat:"Gravy (per bowl)"}
    ]
  },
  thursday: {
    lunch: [
      {icon:"utensils", name:"PANI PURI",    cat:"Main Dish (per pkt)"},
      {icon:"leaf",     name:"BHEL",   cat:"Salad (per bowl)"},
      {icon:"apple-alt",name:"ANY",         cat:"Fruits"}
    ],
    dinner: [
      {icon:"cookie",   name:"DUDHI HALWA",                 cat:"Sweet"},
      {icon:"pepper-hot",name:"LASGANE",cat:"Starter (per unit)"},
      {icon:"bowl-rice",name:"CHICKEN MASKA PULAW",              cat:"Rice (per plate)"}

    ]
  },
  friday: {
    lunch: [
      {icon:"utensils", name:"GREEN TIKKI BURGER", cat:"Main Dish (per unit)"},
      {icon:"leaf",     name:"KURKURE SALAD",        cat:"Salad (per plate)"},
      {icon:"apple-alt",name:"ANY",                cat:"Fruits"}
    ],
    dinner: [
      {icon:"cookie",   name:"GULAB JAMOON",   cat:"Sweet"},
      {icon:"pepper-hot",name:"RAJMA",cat:"Starter (per bowl)"},
      {icon:"bread-slice",name:"ROTI",      cat:"Roti (per unit)"},
      {icon:"bowl-rice",name:"CHAWAL",      cat:"Rice (per plate)"},
      {icon:"bowl-rice",name:"DAL CHAWAL PALIDU",   cat:"Gravy (per bowl)"}
    ]
  },
  saturday: {
    lunch: [
      {icon:"utensils", name:"CHOLE", cat:"Main Dish (per bowl)"},
	  {icon:"utensils", name:"BHATURE", cat:" (per unit)"},
      {icon:"leaf",     name:"CORN",   cat:"Salad (per plate)"},
      {icon:"apple-alt",name:"ANY",     cat:"Fruits"}
    ],
    dinner: [
      {icon:"cookie",   name:"FRUIT CUSTARD",   cat:"Sweet"},
      {icon:"pepper-hot",name:"CHICKEN CHILLI",cat:"Starter (per plate)"},
      {icon:"bowl-rice",name:" KOREAN BIBIMBAM ",         cat:"Rice"}
    ]
  },
  sunday: {
    lunch: [
	  {icon:"pepper-hot",name:"CHICKEN POPCORN",cat:"Starter (per plate)"},
      {icon:"utensils", name:"CHICKEN AFGHANI", cat:"Main Dish (per bowl)"},
      {icon:"bread-slice",name:"ROTI",          cat:"Roti (per unit)"},
      {icon:"bowl-rice",name:"CHAWAL",          cat:"Rice (per plate)"}
    ],
    dinner: [
      {icon:"cookie",   name:"RAS MALAI",   cat:"Sweet"},
	  {icon:"pepper-hot",name:"CHICKEN SHAHI ROLL",cat:"Starter (per unit)"},
      {icon:"pepper-hot",name:"ALMOND SOUP",cat:"Soup (per bowl)"},
      {icon:"bowl-rice",name:"MUTTON MASKA PULAV",cat:"Rice (per plate)"}
    ]
  }
};

/* -------------------------------------------------
   DYNAMIC BUILDER (no need to touch)
   ------------------------------------------------- */
const DAYS = ["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];
const dayNames = {monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",
                  friday:"Friday",saturday:"Saturday",sunday:"Sunday"};

function createIcon(cls){return `<i class="fas fa-${cls}"></i>`;}

function buildTabs(){
  const tabs = document.getElementById('days-tabs');
  DAYS.forEach((d,i)=>{
    const btn = document.createElement('button');
    btn.className='day-tab'+(i===0?' active':'');
    btn.dataset.day=d;
    btn.textContent=dayNames[d];
    tabs.appendChild(btn);
  });
}

function buildDay(day){
  const data = MENU[day];
  const container = document.createElement('div');
  container.className='day-content'+(day==='monday'?' active':'');
  container.id=day;

  const title = document.createElement('h2');
  title.className='day-title';
  title.textContent=`${dayNames[day]}'s Special`;
  container.appendChild(title);

  // ---- LUNCH ----
  if(data.lunch && data.lunch.length){
    const lunchSec = document.createElement('div');
    lunchSec.className='meal-section lunch';
    lunchSec.innerHTML = `<div class="meal-header lunch">${createIcon('sun')} <span>LUNCH</span></div>`;
    const dishes = document.createElement('div');
    dishes.className='dishes-container';
    data.lunch.forEach(it=>{dishes.appendChild(createCategory(it,'lunch'));});
    lunchSec.appendChild(dishes);
    container.appendChild(lunchSec);
  }

  // ---- DINNER ----
  if(data.dinner && data.dinner.length){
    const dinnerSec = document.createElement('div');
    dinnerSec.className='meal-section dinner';
    dinnerSec.innerHTML = `<div class="meal-header dinner">${createIcon('moon')} <span>DINNER</span></div>`;
    const dishes = document.createElement('div');
    dishes.className='dishes-container';
    data.dinner.forEach(it=>{dishes.appendChild(createCategory(it,'dinner'));});
    dinnerSec.appendChild(dishes);
    container.appendChild(dinnerSec);
  }

  // ---- SUMMARY + SUBMIT ----
  const summary = document.createElement('div');
  summary.className='order-summary';
  summary.innerHTML = `<div class="summary-header"><span>Order Summary</span><span>${dayNames[day]}</span></div>
                       <div class="summary-items" id="${day}-summary"></div>`;
  container.appendChild(summary);

  const submit = document.createElement('button');
  submit.className='submit-btn';
  submit.dataset.day=day;
  submit.innerHTML = `${createIcon('paper-plane')} Submit`;
  container.appendChild(submit);

  return container;
}

function createCategory(item, meal){
  const cat = document.createElement('div');
  cat.className='dish-category';
  cat.innerHTML = `<div class="category-title">${item.cat}</div>`;

  const dish = document.createElement('div');
  dish.className='dish-item';
  dish.innerHTML = `
    <div class="dish-info">
      <div class="dish-icon">${createIcon(item.icon)}</div>
      <div class="dish-name">${item.name}</div>
    </div>
    <div class="quantity-selector">
      <button class="qty-btn minus">-</button>
      <div class="qty-display">0</div>
      <button class="qty-btn plus">+</button>
    </div>`;
  cat.appendChild(dish);
  return cat;
}

/* -------------------------------------------------
   RENDER
   ------------------------------------------------- */
buildTabs();
const contentArea = document.getElementById('content-area');
DAYS.forEach(d=>contentArea.appendChild(buildDay(d)));

/* -------------------------------------------------
   INTERACTIVE LOGIC (unchanged, just uses the DOM)
   ------------------------------------------------- */
const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzSU2DvQ7i7QHrsEnXHVPCAKBsT2EP1mMD-5zFtTip5P9mMXYNUkFbRd0kHUKYRCKf8/exec";

function getCurrentDay(){return document.querySelector('.day-tab.active').dataset.day;}
function updateSummary(day){
  const sum = document.getElementById(day+'-summary');
  sum.innerHTML='';
  const lunch=[], dinner=[];
  document.querySelectorAll(`#${day} .meal-section.lunch .dish-item`).forEach(it=>{
    const qty = +it.querySelector('.qty-display').textContent;
    if(qty>0) lunch.push({name:it.querySelector('.dish-name').textContent, qty});
  });
  document.querySelectorAll(`#${day} .meal-section.dinner .dish-item`).forEach(it=>{
    const qty = +it.querySelector('.qty-display').textContent;
    if(qty>0) dinner.push({name:it.querySelector('.dish-name').textContent, qty});
  });
  if(lunch.length){ sum.appendChild(header('sun','Lunch')); lunch.forEach(i=>sum.appendChild(itemRow(i.name,i.qty))); }
  if(dinner.length){ sum.appendChild(header('moon','Dinner')); dinner.forEach(i=>sum.appendChild(itemRow(i.name,i.qty))); }
}
function header(icon,txt){
  const h=document.createElement('div'); h.className='summary-section-header';
  h.innerHTML=`${createIcon(icon)} ${txt}`; return h;
}
function itemRow(name,qty){
  const d=document.createElement('div'); d.className='summary-item';
  d.innerHTML=`<span>${name} x ${qty%1===0?qty:qty.toFixed(1)}</span>`; return d;
}

/* Tabs */
document.querySelectorAll('.day-tab').forEach(t=>t.addEventListener('click',function(){
  document.querySelectorAll('.day-tab,.day-content').forEach(el=>el.classList.remove('active'));
  this.classList.add('active');
  document.getElementById(this.dataset.day).classList.add('active');
  updateSummary(this.dataset.day);
}));

/* Qty buttons */
document.addEventListener('click',e=>{
  if(!e.target.classList.contains('qty-btn')) return;
  const disp = e.target.parentElement.querySelector('.qty-display');
  let v = +disp.textContent;
  if(e.target.classList.contains('plus')) v+=0.5;
  else if(v>0) v-=0.5;
  disp.textContent = v%1===0 ? v : v.toFixed(1);
  updateSummary(getCurrentDay());
});

/* Submit */
document.addEventListener('click',async e=>{
  if(!e.target.classList.contains('submit-btn')) return;
  const day = e.target.dataset.day;
  const name = document.getElementById('customer-name').value.trim();
  if(!name){alert('Enter your name');return;}
  const items=[];
  document.querySelectorAll(`#${day} .dish-item`).forEach(it=>{
    const qty=+it.querySelector('.qty-display').textContent;
    if(qty>0){
      const meal = it.closest('.meal-section').classList.contains('lunch')?'lunch':'dinner';
      items.push({name:it.querySelector('.dish-name').textContent, quantity:qty, mealType:meal});
    }
  });
  if(!items.length){alert('Select at least one dish');return;}
  try{
    await fetch(GOOGLE_SCRIPT_URL,{method:'POST',mode:'no-cors',
      headers:{'Content-Type':'application/json'}, body:JSON.stringify({name,day,items})});
    new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flick.ogg").play();
    const toast=document.getElementById('toast'); toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'),3000);
    if('speechSynthesis' in window){
      const u=new SpeechSynthesisUtterance('Order delivered'); u.rate=2; speechSynthesis.speak(u);
    }
    document.querySelectorAll(`#${day} .qty-display`).forEach(d=>d.textContent='0');
    updateSummary(day);
  }catch(err){alert('Error – try again'); console.error(err);}
});

/* Password modal (unchanged) */
(()=>{const PWD='admin123';
  const btn=document.getElementById('view-db-link'), modal=document.getElementById('db-password-modal'),
        input=document.getElementById('db-password-input'), unlock=document.getElementById('db-unlock-btn'),
        cancel=document.getElementById('db-cancel-btn'), err=document.getElementById('db-modal-error');
  btn.addEventListener('click',e=>{e.preventDefault();modal.style.display='block';input.focus();});
  unlock.addEventListener('click',()=>{if(input.value===PWD){window.open(btn.dataset.href,'_blank');modal.style.display='none';}
    else{err.style.display='block';err.textContent='Wrong password';}});
  cancel.addEventListener('click',()=>{modal.style.display='none';});
  document.getElementById('db-modal-overlay').addEventListener('click',()=>{modal.style.display='none';});
})();
</script>
</body>
</html>